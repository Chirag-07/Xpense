{"ast":null,"code":"var _jsxFileName = \"/Users/vedadnya_98/Documents/GitHub/Xpense/firebase-auth/src/components/Home.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport '../App.css';\nimport { AuthContext } from \"../firebase/Auth\";\nimport 'firebase/firestore';\nimport firebase from \"firebase/app\";\nimport \"firebase/storage\";\nimport { addPosts, getUser, getCollege, getAllColleges } from '../firebase/FirestoreFunctions';\nimport Button from 'react-bootstrap/Button';\n\nconst defcollogo = require('../assets/college-logo.jpg');\n\nfunction Home() {\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const [user, setUser] = useState();\n  const [college, setCollege] = useState();\n  const [collegeList, setCollegeList] = useState();\n  const [postList, setPostList] = useState();\n  const [collegePic, setCollegePic] = useState(defcollogo);\n  const [loading, setLoading] = useState(true);\n  const [postPic, setPostPic] = useState();\n  const [postPicUrl, setPostPicUrl] = useState();\n  useEffect(() => {\n    async function getData() {\n      try {\n        let collegeList = await getAllColleges();\n        setCollegeList(collegeList);\n        let u = await getUser(currentUser.uid);\n        console.log('college id is ' + u.collegeId);\n        let collegeDetails = await getCollege(u.collegeId);\n        setPostList(collegeDetails.posts);\n        console.log(\"get gollege dets\");\n        console.log(collegeDetails);\n        setLoading(false);\n        setUser(u);\n        setCollege(collegeDetails);\n\n        if (college.logo !== \"\") {\n          setCollegePic(college.logo);\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    getData();\n  }, [currentUser, collegePic]); //onChange handler for input field of profile picture\n\n  const handleImageChange = async event => {\n    event.preventDefault();\n\n    if (event.target.files[0]) {\n      const postPicture = event.target.files[0];\n      setPostPic(postPicture);\n    }\n  };\n\n  const handlePosts = async event => {\n    event.preventDefault();\n    let {\n      title,\n      expenses,\n      description,\n      category\n    } = event.target.elements; //upload post image to firebase\n\n    const storage = firebase.storage();\n    const uploadTask = storage.ref(`/postImages/${postPic.name}`).put(postPic);\n    console.log('img uploaded'); // Listen for state changes, errors, and completion of the upload.\n\n    uploadTask.on('state_changed', snapShot => {\n      //takes a snap shot of the process as it is happening\n      console.log(snapShot);\n    }, err => {\n      //catches the errors\n      console.log(err);\n    }, () => {\n      // gets the functions from storage refences the image storage in firebase by the children\n      // gets the download url then sets the image from firebase as the value for the imgUrl key:\n      storage.ref('postImages').child(postPic.name).getDownloadURL().then(fireBaseUrl => {\n        //setProfPicUrl(prevObject => ({...prevObject, imgUrl: fireBaseUrl}))\n        setPostPicUrl(fireBaseUrl); // try {\n        // \tupdateProfilePic(currentUser.uid, fireBaseUrl);\n        // } catch (error) {\n        // \talert(error);\n        // }\n        // console.log('firebase url i s' + fireBaseUrl);\n\n        let post = {\n          title: title.value,\n          authorId: currentUser.uid,\n          expenses: expenses.value,\n          description: description.value,\n          category: category.value,\n          postPicture: fireBaseUrl\n        };\n\n        try {\n          addPosts(currentUser.uid, post);\n        } catch (error) {\n          alert(error);\n        }\n      });\n    });\n  };\n\n  if (loading === false) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 5\n      }\n    }, \"This is the Home page\"), \"YOUR DETAILS !!!\", user ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, \"First Name: \", user.firstName, \"  \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 46\n      }\n    }), \"Last Name: \", user.lastName) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 87\n      }\n    }, \"NOT GETTING USER DATA\"), user && user ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 22\n      }\n    }, \" POSTS BY USER: \", user.posts.map(item => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 7\n        }\n      }, \"Post Detail: \", item.title, \" : \", item.value), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 7\n        }\n      }, \"Post Description: \", item.description));\n    })) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 19\n      }\n    }, \"NOT GETTING USER DATA\"), \"YOUR COLLEGE DATA !!!\", college && college ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 6\n      }\n    }, \"Logo: \", collegePic ? /*#__PURE__*/React.createElement(\"img\", {\n      src: collegePic,\n      alt: \"collegepic\",\n      height: \"42\",\n      widht: \"42\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 30\n      }\n    }) : /*#__PURE__*/React.createElement(\"img\", {\n      src: collegePic,\n      alt: \"defaultpic\",\n      height: \"42\",\n      width: \"42\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 99\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 6\n      }\n    }, \"Name: \", college.name), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 6\n      }\n    }, \"City: \", college.city), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 6\n      }\n    }, \"Average Expenses: \", college.avgExpense), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 6\n      }\n    }, \"POSTS ABOUT COLLEGE: \", postList ? postList.map(post => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 8\n        }\n      }, \"Post Title: \", post.Title), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 8\n        }\n      }, \"Post Category: \", post.Category), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 8\n        }\n      }, \"Post Description: \", post.Description));\n    }) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 12\n      }\n    }, \"NO POSTS\"))) : null, \"LIST OF COLLEGES !!!\", collegeList && collegeList ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 35\n      }\n    }, collegeList.map(item => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: item.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 7\n        }\n      }, \"College Name: \", item.name), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 7\n        }\n      }, \"College Logo: \", item.logo === \"\" ? /*#__PURE__*/React.createElement(\"img\", {\n        src: item.logo,\n        alt: \"collegepic\",\n        height: \"42\",\n        widht: \"42\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 45\n        }\n      }) : /*#__PURE__*/React.createElement(\"img\", {\n        src: collegePic,\n        alt: \"defaultpic\",\n        height: \"42\",\n        widht: \"42\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 113\n        }\n      })));\n    })) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 19\n      }\n    }, \"NOT GETTING College DATA\"), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 5\n      }\n    }, \" ADD YOUR POSTS BELOW \"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handlePosts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"poost-image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 7\n      }\n    }, \"Insert an image\"), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      type: \"file\",\n      id: \"post-image\",\n      onChange: handleImageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 7\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 83\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 7\n      }\n    }, \"Title:\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      name: \"title\",\n      id: \"title\",\n      type: \"text\",\n      placeholder: \"Title\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"expenses\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 7\n      }\n    }, \"Expenses:\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      name: \"expenses\",\n      id: \"expenses\",\n      type: \"number\",\n      placeholder: \"Value\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 7\n      }\n    }, \"Description:\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      name: \"description\",\n      id: \"description\",\n      type: \"textarea\",\n      placeholder: \"Description\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }\n    }, \"Choose a category\"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"category\",\n      name: \"category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      key: \"rent\",\n      value: \"rent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 8\n      }\n    }, \"RENT\"), /*#__PURE__*/React.createElement(\"option\", {\n      key: \"houses\",\n      value: \"houses\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 8\n      }\n    }, \"HOUSES\"), /*#__PURE__*/React.createElement(\"option\", {\n      key: \"groceries\",\n      value: \"groceries\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 8\n      }\n    }, \"GROCERIES\"), /*#__PURE__*/React.createElement(\"option\", {\n      key: \"transport\",\n      value: \"transport\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 8\n      }\n    }, \"TRANSPORT\"))), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 6\n      }\n    }, \" Post \")));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 5\n      }\n    }, \"Loading123....\"));\n  }\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/vedadnya_98/Documents/GitHub/Xpense/firebase-auth/src/components/Home.js"],"names":["React","useContext","useState","useEffect","AuthContext","firebase","addPosts","getUser","getCollege","getAllColleges","Button","defcollogo","require","Home","currentUser","user","setUser","college","setCollege","collegeList","setCollegeList","postList","setPostList","collegePic","setCollegePic","loading","setLoading","postPic","setPostPic","postPicUrl","setPostPicUrl","getData","u","uid","console","log","collegeId","collegeDetails","posts","logo","e","handleImageChange","event","preventDefault","target","files","postPicture","handlePosts","title","expenses","description","category","elements","storage","uploadTask","ref","name","put","on","snapShot","err","child","getDownloadURL","then","fireBaseUrl","post","value","authorId","error","alert","firstName","lastName","map","item","city","avgExpense","Title","Category","Description"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport '../App.css';\nimport { AuthContext } from \"../firebase/Auth\";\nimport 'firebase/firestore';\n\nimport firebase from \"firebase/app\";\nimport \"firebase/storage\";\nimport { addPosts, getUser, getCollege, getAllColleges } from '../firebase/FirestoreFunctions';\nimport Button from 'react-bootstrap/Button';\n\nconst defcollogo = require('../assets/college-logo.jpg')\n\n\nfunction Home() {\n\tconst { currentUser } = useContext(AuthContext)\n\tconst [user, setUser] = useState();\n\tconst [college, setCollege] = useState();\n\tconst [collegeList, setCollegeList] = useState();\n\tconst [postList, setPostList] = useState();\n\tconst [collegePic, setCollegePic] = useState(defcollogo);\n\tconst [loading, setLoading] = useState(true);\n\n\tconst [postPic, setPostPic] = useState();\n\tconst [postPicUrl, setPostPicUrl] = useState();\n\n\tuseEffect(() => {\n\t\tasync function getData() {\n\t\t\ttry {\n\t\t\t\tlet collegeList = await getAllColleges();\n\t\t\t\tsetCollegeList(collegeList)\n\t\t\t\tlet u = await getUser(currentUser.uid);\n\t\t\t\tconsole.log('college id is ' + u.collegeId)\n\t\t\t\tlet collegeDetails = await getCollege(u.collegeId);\n\t\t\t\tsetPostList(collegeDetails.posts);\n\t\t\t\tconsole.log(\"get gollege dets\");\n\t\t\t\tconsole.log(collegeDetails);\n\t\t\t\tsetLoading(false)\n\t\t\t\tsetUser(u);\n\t\t\t\tsetCollege(collegeDetails)\n\t\t\t\tif (college.logo !== \"\") {\n\t\t\t\t\tsetCollegePic(college.logo)\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e)\n\t\t\t}\n\t\t}\n\t\tgetData();\n\t}, [currentUser, collegePic])\n\n\t//onChange handler for input field of profile picture\n\tconst handleImageChange = async (event) => {\n\t\tevent.preventDefault();\n\t\tif (event.target.files[0]) {\n\t\t\tconst postPicture = event.target.files[0];\n\t\t\tsetPostPic(postPicture);\n\t\t}\n\t}\n\n\tconst handlePosts = async (event) => {\n\t\tevent.preventDefault();\n\t\tlet { title, expenses, description, category } = event.target.elements;\n\n\t\t//upload post image to firebase\n\t\tconst storage = firebase.storage();\n\t\tconst uploadTask = storage.ref(`/postImages/${postPic.name}`).put(postPic);\n\t\tconsole.log('img uploaded');\n\n\t\t// Listen for state changes, errors, and completion of the upload.\n\t\tuploadTask.on('state_changed',\n\t\t\t(snapShot) => {\n\t\t\t\t//takes a snap shot of the process as it is happening\n\t\t\t\tconsole.log(snapShot)\n\t\t\t}, (err) => {\n\t\t\t\t//catches the errors\n\t\t\t\tconsole.log(err)\n\t\t\t}, () => {\n\t\t\t\t// gets the functions from storage refences the image storage in firebase by the children\n\t\t\t\t// gets the download url then sets the image from firebase as the value for the imgUrl key:\n\t\t\t\tstorage.ref('postImages').child(postPic.name).getDownloadURL()\n\t\t\t\t\t.then(fireBaseUrl => {\n\t\t\t\t\t\t//setProfPicUrl(prevObject => ({...prevObject, imgUrl: fireBaseUrl}))\n\t\t\t\t\t\tsetPostPicUrl(fireBaseUrl);\n\t\t\t\t\t\t// try {\n\t\t\t\t\t\t// \tupdateProfilePic(currentUser.uid, fireBaseUrl);\n\t\t\t\t\t\t// } catch (error) {\n\t\t\t\t\t\t// \talert(error);\n\t\t\t\t\t\t// }\n\t\t\t\t\t\t// console.log('firebase url i s' + fireBaseUrl);\n\t\t\t\t\t\tlet post = { title: title.value, authorId: currentUser.uid, expenses: expenses.value, description: description.value, category: category.value, postPicture: fireBaseUrl };\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t addPosts(currentUser.uid, post);\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\talert(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t})\n\n\n\t};\n\tif (loading === false) {\n\t\treturn (\n\t\t\t<div className='home'>\n\t\t\t\t<h2>This is the Home page</h2>\n\t\t\t\tYOUR DETAILS !!!\n\t\t\t{user ? (<p>First Name: {user.firstName}  <br />Last Name: {user.lastName}</p>) : (<p>NOT GETTING USER DATA</p>)}\n\t\t\t\t{user && user ? (<div> POSTS BY USER: {user.posts.map((item) => {\n\t\t\t\t\treturn (<div key=\"1\">\n\t\t\t\t\t\t<p>Post Detail: {item.title} : {item.value}</p>\n\t\t\t\t\t\t<p>Post Description: {item.description}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t})}</div>) : (<p>NOT GETTING USER DATA</p>)}\n\n\n\t\t\t\tYOUR COLLEGE DATA !!!\n\t\t\t{college && college ? (<div>\n\t\t\t\t\t<p>Logo: {collegePic ? (<img src={collegePic} alt='collegepic' height=\"42\" widht=\"42\" />) : (<img src={collegePic} alt='defaultpic' height=\"42\" width=\"42\" />)}</p>\n\t\t\t\t\t<p>Name: {college.name}</p>\n\t\t\t\t\t<p>City: {college.city}</p>\n\t\t\t\t\t<p>Average Expenses: {college.avgExpense}</p>\n\t\t\t\t\t<div>POSTS ABOUT COLLEGE: {postList ? postList.map((post) => {\n\t\t\t\t\t\treturn (<div key=\"1\">\n\t\t\t\t\t\t\t<p>Post Title: {post.Title}</p>\n\t\t\t\t\t\t\t<p>Post Category: {post.Category}</p>\n\t\t\t\t\t\t\t<p>Post Description: {post.Description}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t}) : (<p>NO POSTS</p>)\n\t\t\t\t\t}\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>) : null}\n\n\n\n\t\t\t\tLIST OF COLLEGES !!!\n\t\t\t{collegeList && collegeList ? (<div>{collegeList.map((item) => {\n\t\t\t\t\treturn (<div key={item.name}>\n\t\t\t\t\t\t<p>College Name: {item.name}</p>\n\t\t\t\t\t\t<p>College Logo: {item.logo === \"\" ? (<img src={item.logo} alt='collegepic' height=\"42\" widht=\"42\" />) : (<img src={collegePic} alt='defaultpic' height=\"42\" widht=\"42\" />)}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t)\n\n\t\t\t\t})}</div>) : (<p>NOT GETTING College DATA</p>)}\n\n\n\n\t\t\t\t<h2> ADD YOUR POSTS BELOW </h2>\n\t\t\t\t<form onSubmit={handlePosts}>\n\t\t\t\t\t<div className='form-group'>\n\t\t\t\t\t\t<label for=\"poost-image\">Insert an image</label>\n\t\t\t\t\t\t<input required type=\"file\" id=\"post-image\" onChange={handleImageChange} /> <br></br>\n\t\t\t\t\t\t<label for=\"title\">\n\t\t\t\t\t\t\tTitle:\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\tname='title'\n\t\t\t\t\t\t\tid='title'\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tplaceholder='Title'\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<br></br>\n\t\t\t\t\t\t<label for=\"expenses\">\n\t\t\t\t\t\t\tExpenses:\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\tname='expenses'\n\t\t\t\t\t\t\tid='expenses'\n\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\tplaceholder='Value'\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<br></br>\n\t\t\t\t\t\t<label for=\"description\">\n\t\t\t\t\t\t\tDescription:\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\tname='description'\n\t\t\t\t\t\t\tid='description'\n\t\t\t\t\t\t\ttype='textarea'\n\t\t\t\t\t\t\tplaceholder='Description'\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<br></br>\n\t\t\t\t\t\t<label for=\"category\">Choose a category</label>\n\t\t\t\t\t\t<select id='category' name='category'>\n\t\t\t\t\t\t\t{/* {category.map(item => (\n\t\t\t\t\t\t\t<option key={item.id} value={item.name}>\n\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))} */}\n\t\t\t\t\t\t\t<option key='rent' value='rent'>\n\t\t\t\t\t\t\t\tRENT\n\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t<option key='houses' value='houses'>\n\t\t\t\t\t\t\t\tHOUSES\n\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t<option key='groceries' value='groceries'>\n\t\t\t\t\t\t\t\tGROCERIES\n\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t<option key='transport' value='transport'>\n\t\t\t\t\t\t\t\tTRANSPORT\n\t\t\t\t\t\t</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button variant=\"primary\" type='submit'> Post </Button>\n\t\t\t\t</form>\n\t\t\t\t{/* <select id='college' name='college'>\n\t\t\t\t\t\t{colleges.map(item => (\n\t\t\t\t\t\t\t<option key={item.uid} value={item.name}>\n\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\t\n\t\t\t\t\t\t</select> */}\n\n\t\t\t</div>\n\t\t)\n\t}\n\telse {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<p>Loading123....</p>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default Home;\n\n"]},"metadata":{},"sourceType":"module"}