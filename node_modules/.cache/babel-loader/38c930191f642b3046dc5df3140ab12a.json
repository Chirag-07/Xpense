{"ast":null,"code":"import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport firebaseApp from './Firebase';\nimport { Landing } from '../components/Landing';\nlet db = firebaseApp.firestore();\n\nasync function doCreateUserWithEmailAndPassword(email, password, firstName, lastName) {\n  await firebase.auth().createUserWithEmailAndPassword(email, password);\n  var user = firebase.auth().currentUser;\n  let data = {\n    firstName: firstName,\n    lastName: lastName,\n    email: email,\n    dob: new Date(),\n    collegeId: '',\n    status: '',\n    photoURL: '',\n    posts: []\n  };\n  let setDoc = await db.collection('users').doc(user.uid).set(data);\n  let postDoc = await db.collection('posts').doc(user.uid).set({\n    userPosts: []\n  });\n  console.log(setDoc);\n  console.log(postDoc);\n  firebase.auth().currentUser.updateProfile({\n    displayName: String(firstName) + \" \" + String(lastName)\n  });\n}\n\nasync function doChangePassword(email, oldPassword, newPassword) {\n  let credential = firebase.auth.EmailAuthProvider.credential(email, oldPassword);\n  await firebase.auth().currentUser.reauthenticateWithCredential(credential);\n  await firebase.auth().currentUser.updatePassword(newPassword);\n  await doSignOut();\n}\n\nasync function doSignInWithEmailAndPassword(email, password) {\n  await firebase.auth().signInWithEmailAndPassword(email, password);\n}\n\nasync function doSocialSignIn(provider) {\n  let socialProvider = null;\n\n  if (provider === 'google') {\n    socialProvider = new firebase.auth.GoogleAuthProvider();\n  } else if (provider === 'facebook') {\n    socialProvider = new firebase.auth.FacebookAuthProvider();\n  }\n\n  await firebase.auth().signInWithPopup(socialProvider).then(function (result) {\n    console.log(result);\n    const displayName = result.user.displayName.split(\" \");\n    let data = {\n      firstName: displayName[0],\n      lastName: displayName[1],\n      email: result.user.email,\n      dob: new Date(),\n      collegeId: '',\n      status: '',\n      photoURL: '',\n      posts: []\n    };\n    db.collection('users').doc(result.user.uid).set(data);\n  }).catch(function (error) {\n    console.log(error.message);\n  });\n}\n\nasync function doPasswordReset(email) {\n  await firebase.auth().sendPasswordResetEmail(email);\n}\n\nasync function doPasswordUpdate(password) {\n  await firebase.auth().updatePassword(password);\n}\n\nasync function doSignOut() {\n  await firebase.auth().signOut();\n}\n\nexport { doCreateUserWithEmailAndPassword, doSocialSignIn, doSignInWithEmailAndPassword, doPasswordReset, doPasswordUpdate, doSignOut, doChangePassword };","map":{"version":3,"sources":["/Users/vedadnya_98/Documents/GitHub/Xpense/firebase-auth/src/firebase/FirebaseFunctions.js"],"names":["firebase","firebaseApp","Landing","db","firestore","doCreateUserWithEmailAndPassword","email","password","firstName","lastName","auth","createUserWithEmailAndPassword","user","currentUser","data","dob","Date","collegeId","status","photoURL","posts","setDoc","collection","doc","uid","set","postDoc","userPosts","console","log","updateProfile","displayName","String","doChangePassword","oldPassword","newPassword","credential","EmailAuthProvider","reauthenticateWithCredential","updatePassword","doSignOut","doSignInWithEmailAndPassword","signInWithEmailAndPassword","doSocialSignIn","provider","socialProvider","GoogleAuthProvider","FacebookAuthProvider","signInWithPopup","then","result","split","catch","error","message","doPasswordReset","sendPasswordResetEmail","doPasswordUpdate","signOut"],"mappings":"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","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport firebaseApp from './Firebase'\nimport {Landing} from '../components/Landing'\n\nlet db  = firebaseApp.firestore();\n\nasync function doCreateUserWithEmailAndPassword(email, password, firstName , lastName) {\n\tawait firebase.auth().createUserWithEmailAndPassword(email, password)\n\tvar user = firebase.auth().currentUser;\n\tlet data = {\n\t\tfirstName: firstName,\n\t\tlastName : lastName,\n\t\temail : email,\n\t\tdob : new Date(),\n\t\tcollegeId : '',\n\t\tstatus : '',\n\t\tphotoURL : '',\n\t\tposts : []\n\t  };\n\t  let setDoc = await db.collection('users').doc(user.uid).set(data);\n\t let postDoc = await db.collection('posts').doc(user.uid).set({\n\t\tuserPosts:[]\n\t  });\t\n\t  console.log(setDoc)\t  \n\t  console.log(postDoc)\t  \n\n\tfirebase.auth().currentUser.updateProfile({ displayName: String(firstName)+\" \"+String(lastName) });\n}\n\n\nasync function doChangePassword(email, oldPassword, newPassword) {\n\tlet credential = firebase.auth.EmailAuthProvider.credential(email, oldPassword);\n\tawait firebase.auth().currentUser.reauthenticateWithCredential(credential);\n\tawait firebase.auth().currentUser.updatePassword(newPassword);\n\tawait doSignOut();\n}\n\nasync function doSignInWithEmailAndPassword(email, password) {\n\tawait firebase.auth().signInWithEmailAndPassword(email, password);\n}\n\nasync function doSocialSignIn(provider) {\n\tlet socialProvider = null;\n\tif (provider === 'google') {\n\t\tsocialProvider = new firebase.auth.GoogleAuthProvider()\n\t} else if (provider === 'facebook') {\n\t\tsocialProvider = new firebase.auth.FacebookAuthProvider();\n\t}\n\tawait firebase.auth().signInWithPopup(socialProvider).then(function(result) {\n\t\tconsole.log(result)\n\t\tconst displayName = result.user.displayName.split(\" \")\n\t\tlet data = {\n\t\t\tfirstName: displayName[0],\n\t\t\tlastName : displayName[1],\n\t\t\temail : result.user.email,\n\t\t\tdob : new Date(),\n\t\t\tcollegeId : '',\n\t\t\tstatus : '',\n\t\t\tphotoURL : '',\n\t\t\tposts : []\n\t\t  };\n\t\t  db.collection('users').doc(result.user.uid).set(data);\t\n\t  }).catch(function(error) {\n\t\tconsole.log(error.message)\n\t  });\n}\n\nasync function doPasswordReset(email) {\n\tawait firebase.auth().sendPasswordResetEmail(email);\n}\n\nasync function doPasswordUpdate(password) {\n\tawait firebase.auth().updatePassword(password);\n}\n\nasync function doSignOut() {\n\tawait firebase.auth().signOut();\n}\n\nexport {\n\tdoCreateUserWithEmailAndPassword,\n\tdoSocialSignIn,\n\tdoSignInWithEmailAndPassword,\n\tdoPasswordReset,\n\tdoPasswordUpdate,\n\tdoSignOut,\n\tdoChangePassword\n};\n"]},"metadata":{},"sourceType":"module"}