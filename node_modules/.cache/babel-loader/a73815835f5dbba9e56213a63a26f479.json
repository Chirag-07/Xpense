{"ast":null,"code":"import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport firebaseApp from './Firebase';\nlet db = firebaseApp.firestore(); // async function updateUser(userObject) {\n//     await db.collection('users').doc(uid).set(userObject)\n// };\n\nasync function addPosts(uid, postObject) {\n  await db.collection('posts').doc(uid).set(postObject);\n  await db.collection('users').doc(uid).update({\n    posts: firebase.firestore.FieldValue.arrayUnion(postObject)\n  });\n}\n\n; // async function deletePosts(userObject) {\n//     const removeObj = db.collection('posts').doc(uid).delete()\n//     await db.collection('users').doc(uid).update({\n//         // posts : firebase.firestore.FieldValue.arrayUnion(postObject)\n//         posts : firebase.firestore.FieldValue.arrayUnion(userObject)\n//     });\n// };\n\nasync function getUser(uid) {\n  let userRef = await db.collection('users').doc(uid);\n  let getDoc = userRef.get().then(doc => {\n    if (!doc.exists) {\n      console.log('No such document!');\n    } else {\n      //console.log('Document data:', doc.data());\n      console.log(\"Inside firestore functions: \", doc.data());\n      return doc.data();\n    }\n  }).catch(err => {\n    console.log('Error getting document', err);\n  });\n  return getDoc;\n}\n\n; //function to add/update profile pic of the user\n\nasync function updateProfilePic(uid, imageUrl) {\n  // let userRef = await db.collection('users').doc(uid);\n  console.log('enter update profile pic');\n  let updatePic = await db.collection(\"users\").doc(uid).update({\n    \"photoURL\": imageUrl\n  }).then(function () {\n    console.log(\"profile pic was updated!\");\n  });\n} //function to update account details of the user\n\n\nasync function updateAccountInfo(uid, firstName, lastName) {\n  // let userRef = await db.collection('users').doc(uid);\n  console.log('enter update account info ');\n  let updateInfo = await db.collection(\"users\").doc(uid).update({\n    \"firstName\": firstName,\n    \"lastName\": lastName\n  }).then(function () {\n    console.log(\"profile pic was updated!\");\n  });\n}\n\nasync function getPost(uid) {\n  let postRef = await db.collection('posts').doc(uid);\n  let getDoc = postRef.get().then(doc => {\n    if (!doc.exists) {\n      console.log('No such document!');\n    } else {\n      return doc.data();\n    }\n  }).catch(err => {\n    console.log('Error getting document', err);\n  });\n  return getDoc;\n}\n\n;\n\nasync function getAllPostsforCollege(collegeID) {\n  let postsRef = db.collection('posts');\n  let allPosts = [];\n  let query = postsRef.where('collegeID', '==', collegeID).get().then(snapshot => {\n    if (snapshot.empty) {\n      console.log('No matching documents.');\n      return;\n    }\n\n    snapshot.forEach(doc => {\n      //console.log(doc.id, '=>', doc.data());\n      allPosts.add(doc.data());\n    });\n    return allPosts;\n  }).catch(err => {\n    console.log('Error getting documents', err);\n  });\n  return query;\n}\n\n;\n\nasync function getAllPosts() {\n  const snapshot = await firebase.firestore().collection('posts').get();\n  return snapshot.docs.map(doc => doc.data());\n}\n\n;\n\nasync function getAllColleges() {\n  const snapshot = await firebase.firestore().collection('colleges').get();\n  return snapshot.docs.map(doc => doc.data());\n}\n\n;\n\nasync function getCollege(uid) {\n  let collegeRef = await db.collection('colleges').doc(uid);\n  let getDoc = collegeRef.get().then(doc => {\n    if (!doc.exists) {\n      console.log('No such document!');\n    } else {\n      return doc.data();\n    }\n  }).catch(err => {\n    console.log('Error getting document', err);\n  });\n  return getDoc;\n}\n\n;\nexport { // updateUser,\naddPosts, getAllColleges, getCollege // deletePosts,\n, getAllPosts, getAllPostsforCollege, getUser, getPost, updateProfilePic, updateAccountInfo };","map":{"version":3,"sources":["/Users/vedadnya_98/Documents/GitHub/Xpense/firebase-auth/src/firebase/FirestoreFunctions.js"],"names":["firebase","firebaseApp","db","firestore","addPosts","uid","postObject","collection","doc","set","update","posts","FieldValue","arrayUnion","getUser","userRef","getDoc","get","then","exists","console","log","data","catch","err","updateProfilePic","imageUrl","updatePic","updateAccountInfo","firstName","lastName","updateInfo","getPost","postRef","getAllPostsforCollege","collegeID","postsRef","allPosts","query","where","snapshot","empty","forEach","add","getAllPosts","docs","map","getAllColleges","getCollege","collegeRef"],"mappings":"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","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport firebaseApp from './Firebase'\n\nlet db = firebaseApp.firestore();\n\n// async function updateUser(userObject) {\n//     await db.collection('users').doc(uid).set(userObject)\n// };\n\nasync function addPosts(uid, postObject) {\n  await db.collection('posts').doc(uid).set(postObject);\n  await db.collection('users').doc(uid).update({\n    posts: firebase.firestore.FieldValue.arrayUnion(postObject)\n  });\n};\n\n// async function deletePosts(userObject) {\n//     const removeObj = db.collection('posts').doc(uid).delete()\n//     await db.collection('users').doc(uid).update({\n//         // posts : firebase.firestore.FieldValue.arrayUnion(postObject)\n//         posts : firebase.firestore.FieldValue.arrayUnion(userObject)\n//     });\n// };\n\n\nasync function getUser(uid) {\n  let userRef = await db.collection('users').doc(uid);\n  let getDoc = userRef.get()\n    .then(doc => {\n      if (!doc.exists) {\n        console.log('No such document!');\n      } else {\n        //console.log('Document data:', doc.data());\n        console.log(\"Inside firestore functions: \", doc.data())\n        return doc.data();\n      }\n    })\n    .catch(err => {\n      console.log('Error getting document', err);\n    });\n  return getDoc\n};\n\n//function to add/update profile pic of the user\nasync function updateProfilePic(uid,imageUrl) {\n  // let userRef = await db.collection('users').doc(uid);\n  console.log('enter update profile pic');\n   let updatePic= await db.collection(\"users\").doc(uid).update({\n    \"photoURL\": imageUrl,\n  })\n    .then(function () {\n      console.log(\"profile pic was updated!\");\n    });\n}\n\n//function to update account details of the user\nasync function updateAccountInfo(uid,firstName,lastName) {\n  // let userRef = await db.collection('users').doc(uid);\n  console.log('enter update account info ');\n   let updateInfo = await db.collection(\"users\").doc(uid).update({\n    \"firstName\": firstName,\n    \"lastName\":lastName\n  })\n    .then(function () {\n      console.log(\"profile pic was updated!\");\n    });\n}\nasync function getPost(uid) {\n  let postRef = await db.collection('posts').doc(uid);\n  let getDoc = postRef.get()\n    .then(doc => {\n      if (!doc.exists) {\n        console.log('No such document!');\n      } else {\n        return doc.data()\n      }\n    })\n    .catch(err => {\n      console.log('Error getting document', err);\n    });\n  return getDoc\n};\n\n\nasync function getAllPostsforCollege(collegeID) {\n  let postsRef = db.collection('posts');\n  let allPosts = []\n  let query = postsRef.where('collegeID', '==', collegeID).get()\n    .then(snapshot => {\n      if (snapshot.empty) {\n        console.log('No matching documents.');\n        return;\n      }\n      snapshot.forEach(doc => {\n        //console.log(doc.id, '=>', doc.data());\n        allPosts.add(doc.data())\n      });\n      return allPosts\n    })\n    .catch(err => {\n      console.log('Error getting documents', err);\n    });\n  return query;\n};\n\nasync function getAllPosts() {\n  const snapshot = await firebase.firestore().collection('posts').get()\n  return snapshot.docs.map(doc => doc.data());\n};\n\nasync function getAllColleges() {\n  const snapshot = await firebase.firestore().collection('colleges').get()\n  return snapshot.docs.map(doc => doc.data());\n};\n\nasync function getCollege(uid) {\n  let collegeRef = await db.collection('colleges').doc(uid);\n  let getDoc = collegeRef.get()\n    .then(doc => {\n      if (!doc.exists) {\n        console.log('No such document!');\n      } else {\n        return doc.data()\n      }\n    })\n    .catch(err => {\n      console.log('Error getting document', err);\n    });\n  return getDoc\n};\n\nexport {\n  // updateUser,\n  addPosts,\n  getAllColleges,\n  getCollege,\n  // deletePosts,\n  getAllPosts,\n  getAllPostsforCollege,\n  getUser,\n  getPost,\n  updateProfilePic,\n  updateAccountInfo\n};\n\n\n"]},"metadata":{},"sourceType":"module"}